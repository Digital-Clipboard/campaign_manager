# List Management Workflows & Diagrams

## Document Information

- **Version**: 1.0
- **Date**: October 1, 2025
- **Status**: âœ… Complete
- **Purpose**: Visual workflows and sequence diagrams for AI-driven list management

---

## Table of Contents

1. [Complete System Flow](#complete-system-flow)
2. [Workflow 1: Post-Campaign Maintenance](#workflow-1-post-campaign-maintenance)
3. [Workflow 2: Weekly Health Check](#workflow-2-weekly-health-check)
4. [Workflow 3: Pre-Campaign Validation](#workflow-3-pre-campaign-validation)
5. [AI Agent Orchestration](#ai-agent-orchestration)
6. [State Machine](#state-machine)
7. [Error Handling Flows](#error-handling-flows)

---

## Complete System Flow

### High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CAMPAIGN LIFECYCLE                        â”‚
â”‚  (Existing 5-stage system)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                Stage 5: Wrap-Up (T+30min)
                        â”‚
                        â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Schedule Stage 6 (T+24h)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STAGE 6: LIST MAINTENANCE (T+24h)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. Fetch bounce data from Mailjet                     â”‚  â”‚
â”‚  â”‚  2. AI analyzes â†’ suppression plan                     â”‚  â”‚
â”‚  â”‚  3. Execute suppression                                â”‚  â”‚
â”‚  â”‚  4. Remove from campaign lists                         â”‚  â”‚
â”‚  â”‚  5. AI generates â†’ rebalancing plan                    â”‚  â”‚
â”‚  â”‚  6. Execute rebalancing                                â”‚  â”‚
â”‚  â”‚  7. Update Redis cache                                 â”‚  â”‚
â”‚  â”‚  8. Log to database                                    â”‚  â”‚
â”‚  â”‚  9. Send Slack report                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â†“
              Campaign Lists Updated
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
  campaign_list_1  campaign_list_2  campaign_list_3
    (Balanced)       (Balanced)       (Balanced)
        â”‚               â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            Ready for next campaign
```

### Weekly Health Check (Parallel)

```
Every Monday 10 AM UTC
        â”‚
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WEEKLY LIST HEALTH CHECK               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. Sync all lists from Mailjet    â”‚  â”‚
â”‚  â”‚  2. Update Redis cache             â”‚  â”‚
â”‚  â”‚  3. Calculate list metrics         â”‚  â”‚
â”‚  â”‚  4. AI analyzes each list          â”‚  â”‚
â”‚  â”‚  5. Generate weekly report         â”‚  â”‚
â”‚  â”‚  6. Check for critical issues      â”‚  â”‚
â”‚  â”‚  7. Send Slack notification        â”‚  â”‚
â”‚  â”‚  8. Log to database                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Workflow 1: Post-Campaign Maintenance

### Sequence Diagram

```
Scheduler  MaintenanceService  MailJet  OptimizationAgent  Rebalancing Agent  Database  Slack  Redis
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚ T+24h        â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚  trigger     â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 1: Fetch bounce data  â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  BounceData[] â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 2: AI analyzes bouncesâ”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  analyze(bounceData)       â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  SuppressionPlan           â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  + AI rationale            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 3: Execute suppressionâ”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  suppress()   â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  Results      â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 4: Remove from lists  â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  removeContacts()          â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 5: AI generates rebalancing plan          â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  generateRebalancingPlan()                     â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚       â”‚      â”‚
   â”‚              â”‚  RebalancingPlan + AI rationale                â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 6: Execute rebalancingâ”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  moveContacts()â”‚           â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚  Results      â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 7: Update Redis cache â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚              â”‚  set(metadata)             â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 8: Log to database    â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚      â”‚
   â”‚              â”‚  create(MaintenanceLog)    â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚      â”‚
   â”‚              â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚ Step 9: Send Slack report  â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚      â”‚
   â”‚              â”‚  postMessage()             â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
   â”‚  complete    â”‚               â”‚            â”‚                   â”‚             â”‚       â”‚      â”‚
```

### Detailed Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           START: Post-Campaign Maintenance (T+24h)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Get CampaignSchedule      â”‚
            â”‚  from trigger              â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 1: Fetch Bounce Data â”‚
            â”‚  mailjet.getCampaignBouncesâ”‚
            â”‚  (mailjetCampaignId)       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log: Bounce data collectedâ”‚
            â”‚  - Total bounces           â”‚
            â”‚  - Hard bounces            â”‚
            â”‚  - Soft bounces            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: AI Analysis (OptimizationAgent)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Input:                                              â”‚  â”‚
â”‚  â”‚  â€¢ bounceData (BounceEvent[])                        â”‚  â”‚
â”‚  â”‚  â€¢ listHistory (past performance)                    â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  AI Prompt:                                          â”‚  â”‚
â”‚  â”‚  "Analyze bounce data and recommend contacts for     â”‚  â”‚
â”‚  â”‚   suppression based on industry best practices..."   â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  Output:                                             â”‚  â”‚
â”‚  â”‚  â€¢ suppressImmediately (hard bounces)                â”‚  â”‚
â”‚  â”‚  â€¢ monitorClosely (repeated soft bounces)            â”‚  â”‚
â”‚  â”‚  â€¢ keepInList (temporary issues)                     â”‚  â”‚
â”‚  â”‚  â€¢ rationale (AI explanation)                        â”‚  â”‚
â”‚  â”‚  â€¢ expectedImprovement (delivery rate â†‘)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log: AI suppression plan  â”‚
            â”‚  generated                 â”‚
            â”‚  - To suppress: N contacts â”‚
            â”‚  - To monitor: M contacts  â”‚
            â”‚  - AI rationale            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 3: Execute Suppressionâ”‚
            â”‚  suppressContacts()        â”‚
            â”‚  - Add to suppression list â”‚
            â”‚  - Store AI rationale      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log: Contacts suppressed  â”‚
            â”‚  - Success: N              â”‚
            â”‚  - Failed: M               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 4: Remove from Lists â”‚
            â”‚  Promise.all([             â”‚
            â”‚    removeFrom(list_1),     â”‚
            â”‚    removeFrom(list_2),     â”‚
            â”‚    removeFrom(list_3)      â”‚
            â”‚  ])                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: AI Rebalancing Plan (RebalancingAgent)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Input:                                              â”‚  â”‚
â”‚  â”‚  â€¢ campaignLists (current sizes)                     â”‚  â”‚
â”‚  â”‚  â€¢ suppressedContacts (removed)                      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  AI Prompt:                                          â”‚  â”‚
â”‚  â”‚  "Create optimal rebalancing plan for 3 lists.       â”‚  â”‚
â”‚  â”‚   Minimize contact movement, preserve FIFO..."       â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  Output:                                             â”‚  â”‚
â”‚  â”‚  â€¢ targetDistribution (per list)                     â”‚  â”‚
â”‚  â”‚  â€¢ movements (which contacts to move)                â”‚  â”‚
â”‚  â”‚  â€¢ rationale (AI explanation)                        â”‚  â”‚
â”‚  â”‚  â€¢ expectedImpact (balance improvement)              â”‚  â”‚
â”‚  â”‚  â€¢ alternativesConsidered                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log: Rebalancing plan     â”‚
            â”‚  generated                 â”‚
            â”‚  - Target distribution     â”‚
            â”‚  - Movements: N contacts   â”‚
            â”‚  - AI rationale            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 6: Execute Rebalancingâ”‚
            â”‚  executeRebalancing()      â”‚
            â”‚  - Move contacts between   â”‚
            â”‚    lists as planned        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log: Rebalancing complete â”‚
            â”‚  - Lists updated: 3        â”‚
            â”‚  - Contacts moved: N       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 7: Update Redis Cacheâ”‚
            â”‚  updateListMetadataCache() â”‚
            â”‚  - Invalidate old cache    â”‚
            â”‚  - Store new metadata      â”‚
            â”‚  - TTL: 1 hour             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 8: Log to Database   â”‚
            â”‚  create(MaintenanceLog)    â”‚
            â”‚  - Bounce analysis         â”‚
            â”‚  - Suppression results     â”‚
            â”‚  - Rebalancing results     â”‚
            â”‚  - AI assessments          â”‚
            â”‚  - Before/after states     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 9: Generate & Send Slack Report (ReportingAgent)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Report Contents:                                    â”‚  â”‚
â”‚  â”‚  â€¢ Campaign details                                  â”‚  â”‚
â”‚  â”‚  â€¢ Cleanup results (N suppressed)                    â”‚  â”‚
â”‚  â”‚  â€¢ AI assessment (optimization)                      â”‚  â”‚
â”‚  â”‚  â€¢ Rebalancing results (before/after)                â”‚  â”‚
â”‚  â”‚  â€¢ AI assessment (rebalancing)                       â”‚  â”‚
â”‚  â”‚  â€¢ Impact (projected improvements)                   â”‚  â”‚
â”‚  â”‚  â€¢ Next campaign timing                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Send to #_traction channelâ”‚
            â”‚  slackClient.postMessage() â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log: Post-campaign        â”‚
            â”‚  maintenance completed     â”‚
            â”‚  - Duration: T ms          â”‚
            â”‚  - Maintenance log ID: N   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  END: Lists cleaned        â”‚
            â”‚  and rebalanced            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Workflow 2: Weekly Health Check

### Sequence Diagram

```
Scheduler  HealthCheckService  MailJet  Redis  ListHealthAgent  ReportingAgent  Database  Slack
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚ Monday       â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚ 10 AM UTC    â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚  trigger     â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 1: Sync all lists             â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  getMasterListâ”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  getCampaignLists     â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  getSuppressionList   â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 2: Update Redis cache        â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚         â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  set(lists, TTL=3600)  â”‚         â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 3: Fetch recent campaigns    â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚
   â”‚              â”‚  findMany(last 7 days) â”‚         â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 4: Calculate metrics         â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  (bounce rates, health status)    â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 5: AI analyzes each list     â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  analyze(list1Metrics)            â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚            â”‚       â”‚
   â”‚              â”‚  HealthAssessment                 â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  analyze(list2Metrics)            â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  analyze(list3Metrics)            â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 6: Generate weekly report    â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚       â”‚
   â”‚              â”‚  generateWeeklyReport()           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚       â”‚
   â”‚              â”‚  WeeklyReport                     â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 7: Check for critical issues â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚  if (urgency === 'high')          â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚              â”‚  postMessage(CRITICAL ALERT)      â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 8: Send weekly report        â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚              â”‚  postMessage(weekly report)       â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚              â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚ Step 9: Log to database           â”‚                â”‚            â”‚       â”‚
   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚
   â”‚              â”‚  create(ListHealthCheck)          â”‚                â”‚            â”‚       â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
   â”‚  complete    â”‚               â”‚       â”‚           â”‚                â”‚            â”‚       â”‚
```

### Detailed Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        START: Weekly List Health Check (Monday 10 AM UTC)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log: Starting weekly      â”‚
            â”‚  list health check         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 1: Sync All Lists    â”‚
            â”‚  Promise.all([             â”‚
            â”‚    getMasterList(5776),    â”‚
            â”‚    getCampaignList(1),     â”‚
            â”‚    getCampaignList(2),     â”‚
            â”‚    getCampaignList(3),     â”‚
            â”‚    getSuppressionList()    â”‚
            â”‚  ])                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 2: Update Redis Cacheâ”‚
            â”‚  For each list:            â”‚
            â”‚  redis.set(               â”‚
            â”‚    key,                    â”‚
            â”‚    JSON.stringify(list),   â”‚
            â”‚    'EX', 3600              â”‚
            â”‚  )                         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 3: Fetch Recent      â”‚
            â”‚  Campaign Performance      â”‚
            â”‚  database.findMany({       â”‚
            â”‚    where: {                â”‚
            â”‚      scheduledDate >= now-7â”‚
            â”‚    },                      â”‚
            â”‚    include: { metrics }    â”‚
            â”‚  })                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: Calculate List Metrics                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  For each campaign list:                             â”‚  â”‚
â”‚  â”‚  â€¢ subscriberCount (current size)                    â”‚  â”‚
â”‚  â”‚  â€¢ recentBounceRate (avg last 7 days)                â”‚  â”‚
â”‚  â”‚  â€¢ targetSize (masterList / 3)                       â”‚  â”‚
â”‚  â”‚  â€¢ variance (actual vs target)                       â”‚  â”‚
â”‚  â”‚  â€¢ healthStatus (preliminary assessment)             â”‚  â”‚
â”‚  â”‚  â€¢ lastCampaignDate                                  â”‚  â”‚
â”‚  â”‚  â€¢ deliveryRate (avg last 7 days)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: AI Health Analysis (ListHealthAgent)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  For each list (run in parallel):                   â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  Input:                                              â”‚  â”‚
â”‚  â”‚  â€¢ list metrics (from Step 4)                        â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  AI Prompt:                                          â”‚  â”‚
â”‚  â”‚  "Analyze the health of this email campaign list... â”‚  â”‚
â”‚  â”‚   Provide health status, concerns, risk factors..."  â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  Output (per list):                                  â”‚  â”‚
â”‚  â”‚  â€¢ status (healthy/warning/critical)                 â”‚  â”‚
â”‚  â”‚  â€¢ concerns (key issues)                             â”‚  â”‚
â”‚  â”‚  â€¢ riskFactors (potential problems)                  â”‚  â”‚
â”‚  â”‚  â€¢ reputationImpact (sender reputation)              â”‚  â”‚
â”‚  â”‚  â€¢ urgency (low/medium/high)                         â”‚  â”‚
â”‚  â”‚  â€¢ aiRationale (explanation)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: Generate Weekly Report (ReportingAgent)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Input:                                              â”‚  â”‚
â”‚  â”‚  â€¢ listMetrics (all 3 lists)                         â”‚  â”‚
â”‚  â”‚  â€¢ recentActivity (last 7 days)                      â”‚  â”‚
â”‚  â”‚    - campaigns sent                                  â”‚  â”‚
â”‚  â”‚    - contacts suppressed                             â”‚  â”‚
â”‚  â”‚    - rebalancing events                              â”‚  â”‚
â”‚  â”‚    - issues detected                                 â”‚  â”‚
â”‚  â”‚    - new contacts added                              â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  AI Prompt:                                          â”‚  â”‚
â”‚  â”‚  "Generate executive-level weekly report...          â”‚  â”‚
â”‚  â”‚   Include summary, highlights, action items..."      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  Output:                                             â”‚  â”‚
â”‚  â”‚  â€¢ summary (2-3 sentences)                           â”‚  â”‚
â”‚  â”‚  â€¢ highlights (positive developments)                â”‚  â”‚
â”‚  â”‚  â€¢ actionItems (prioritized issues)                  â”‚  â”‚
â”‚  â”‚  â€¢ weekOverWeek (comparison)                         â”‚  â”‚
â”‚  â”‚  â€¢ recommendations (next week actions)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 7: Check for Criticalâ”‚
            â”‚  Issues                    â”‚
            â”‚  filter(urgency === 'high')â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    Yes  â”‚  No
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼            â”‚            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Send CRITICAL    â”‚ â”‚  â”‚ Skip critical    â”‚
   â”‚ alert to Slack   â”‚ â”‚  â”‚ alert            â”‚
   â”‚ ðŸš¨ Urgent notice â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 8: Send Weekly Reportâ”‚
            â”‚  to Slack                  â”‚
            â”‚  postMessage(#_traction)   â”‚
            â”‚  - Executive summary       â”‚
            â”‚  - Health assessments      â”‚
            â”‚  - Action items            â”‚
            â”‚  - Recommendations         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Step 9: Log to Database   â”‚
            â”‚  create(ListHealthCheck)   â”‚
            â”‚  - Executed at             â”‚
            â”‚  - Master list size        â”‚
            â”‚  - Campaign list sizes     â”‚
            â”‚  - Suppression list size   â”‚
            â”‚  - Health assessments      â”‚
            â”‚  - Weekly report           â”‚
            â”‚  - Critical issues count   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log: Weekly health check  â”‚
            â”‚  completed                 â”‚
            â”‚  - Critical issues: N      â”‚
            â”‚  - Total issues: M         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  END: Reports sent         â”‚
            â”‚  Next check: next Monday   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Workflow 3: Pre-Campaign Validation

### Sequence Diagram (Integration with Existing Pre-Flight)

```
PreFlightService  ListValidator  MailJet  Redis  ListHealthAgent  Database  Slack
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ Stage 2        â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ (T-3.25h)      â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ Existing pre-flight checks â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ (list, campaign, technical)â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ NEW: List health validationâ”‚       â”‚           â”‚            â”‚       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ validateListForCampaign()  â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚ Check 1: Verify list size    â”‚            â”‚       â”‚
       â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚ getList() â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚ Check 2: Verify no suppressed contacts    â”‚       â”‚
       â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚ getListContacts() â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚ getSuppressionList()         â”‚            â”‚       â”‚
       â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚ Check 3: Verify cache freshness          â”‚       â”‚
       â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚         â”‚            â”‚       â”‚
       â”‚                â”‚ get(metadata)      â”‚         â”‚            â”‚       â”‚
       â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚ Check 4: AI assessment       â”‚            â”‚       â”‚
       â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚       â”‚
       â”‚                â”‚ analyze(recentMetrics)        â”‚            â”‚       â”‚
       â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚       â”‚
       â”‚                â”‚ HealthAssessment             â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ ListValidation â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ + issues[]     â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ + healthStatus â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ + aiAssessment â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚                â”‚           â”‚       â”‚           â”‚            â”‚       â”‚
       â”‚ Include in pre-flight report      â”‚           â”‚            â”‚       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚ postMessage(pre-flight results)   â”‚           â”‚            â”‚       â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

### Detailed Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    START: Pre-Campaign List Validation (Part of Pre-Flight)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Get CampaignSchedule      â”‚
            â”‚  - listId                  â”‚
            â”‚  - recipientCount          â”‚
            â”‚  - scheduledDate           â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Initialize validation     â”‚
            â”‚  issues = []               â”‚
            â”‚  listExists = false        â”‚
            â”‚  sizeMatch = false         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check 1: Verify List Exists and Correct Size              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  list = mailjet.getList(schedule.listId)             â”‚  â”‚
â”‚  â”‚  expectedSize = schedule.recipientCount              â”‚  â”‚
â”‚  â”‚  actualSize = list.subscriberCount                   â”‚  â”‚
â”‚  â”‚  discrepancy = |actualSize - expectedSize|           â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  if (discrepancy > 10):                              â”‚  â”‚
â”‚  â”‚    issues.push({                                     â”‚  â”‚
â”‚  â”‚      severity: 'warning',                            â”‚  â”‚
â”‚  â”‚      message: 'List size mismatch'                   â”‚  â”‚
â”‚  â”‚    })                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check 2: Verify No Suppressed Contacts in List            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  listContacts = mailjet.getListContacts(             â”‚  â”‚
â”‚  â”‚    schedule.listId, 100                              â”‚  â”‚
â”‚  â”‚  )                                                   â”‚  â”‚
â”‚  â”‚  suppressedList = mailjet.getListContacts(           â”‚  â”‚
â”‚  â”‚    10503500, 10000                                   â”‚  â”‚
â”‚  â”‚  )                                                   â”‚  â”‚
â”‚  â”‚  suppressedIds = Set(suppressedList.map(c => c.ID))  â”‚  â”‚
â”‚  â”‚  suppressedInList = listContacts.filter(c =>         â”‚  â”‚
â”‚  â”‚    suppressedIds.has(c.ID)                           â”‚  â”‚
â”‚  â”‚  )                                                   â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  if (suppressedInList.length > 0):                   â”‚  â”‚
â”‚  â”‚    issues.push({                                     â”‚  â”‚
â”‚  â”‚      severity: 'critical',                           â”‚  â”‚
â”‚  â”‚      message: 'Found N suppressed contacts',         â”‚  â”‚
â”‚  â”‚      action: 'Remove before launch'                  â”‚  â”‚
â”‚  â”‚    })                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check 3: Verify List Freshness (Cache)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  cacheData = redis.get(`list:metadata:${listId}`)    â”‚  â”‚
â”‚  â”‚  if (cacheData):                                     â”‚  â”‚
â”‚  â”‚    metadata = JSON.parse(cacheData)                  â”‚  â”‚
â”‚  â”‚    hoursSinceSync = (now - metadata.lastSynced) / 3600â”‚ â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚    if (hoursSinceSync > 24):                         â”‚  â”‚
â”‚  â”‚      issues.push({                                   â”‚  â”‚
â”‚  â”‚        severity: 'warning',                          â”‚  â”‚
â”‚  â”‚        message: 'List cache stale (N hours old)',    â”‚  â”‚
â”‚  â”‚        action: 'Consider refreshing'                 â”‚  â”‚
â”‚  â”‚      })                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check 4: AI Assessment of List Quality                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  recentMetrics = getRecentListMetrics(listId)        â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  healthAgent = new ListHealthAgent()                 â”‚  â”‚
â”‚  â”‚  healthAssessment = healthAgent.analyze(             â”‚  â”‚
â”‚  â”‚    recentMetrics                                     â”‚  â”‚
â”‚  â”‚  )                                                   â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  validation.healthStatus = healthAssessment.status   â”‚  â”‚
â”‚  â”‚  validation.aiAssessment = healthAssessment.rationaleâ”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  if (healthAssessment.urgency === 'high'):           â”‚  â”‚
â”‚  â”‚    issues.push({                                     â”‚  â”‚
â”‚  â”‚      severity: 'warning',                            â”‚  â”‚
â”‚  â”‚      message: 'AI flagged list health concerns',     â”‚  â”‚
â”‚  â”‚      details: healthAssessment.concerns,             â”‚  â”‚
â”‚  â”‚      action: healthAssessment.aiRationale            â”‚  â”‚
â”‚  â”‚    })                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Return ListValidation     â”‚
            â”‚  - listExists: boolean     â”‚
            â”‚  - sizeMatch: boolean      â”‚
            â”‚  - discrepancy: number     â”‚
            â”‚  - issues: Issue[]         â”‚
            â”‚  - healthStatus: string    â”‚
            â”‚  - aiAssessment: string    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Include in Pre-Flight     â”‚
            â”‚  Notification              â”‚
            â”‚  (existing Stage 2 report) â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  END: Validation complete  â”‚
            â”‚  Issues flagged if any     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## AI Agent Orchestration

### Parallel Agent Execution

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ListManagementOrchestrator                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Initialize GeminiClient   â”‚
            â”‚  (shared across agents)    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Prepare input data for    â”‚
            â”‚  agents:                   â”‚
            â”‚  â€¢ Campaign metrics        â”‚
            â”‚  â€¢ List metadata           â”‚
            â”‚  â€¢ Historical context      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Execute Agents in Parallel (Promise.all)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  const [health, rebalance, optimization, report] =   â”‚  â”‚
â”‚  â”‚    await Promise.all([                               â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚      listHealthAgent.analyze(metrics),               â”‚  â”‚
â”‚  â”‚      â†“                                               â”‚  â”‚
â”‚  â”‚      â€¢ Gemini API call 1 (concurrent)                â”‚  â”‚
â”‚  â”‚      â€¢ Temperature: 0.7                              â”‚  â”‚
â”‚  â”‚      â€¢ Returns: HealthAssessment                     â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚      rebalancingAgent.generatePlan(lists),           â”‚  â”‚
â”‚  â”‚      â†“                                               â”‚  â”‚
â”‚  â”‚      â€¢ Gemini API call 2 (concurrent)                â”‚  â”‚
â”‚  â”‚      â€¢ Temperature: 0.5 (deterministic)              â”‚  â”‚
â”‚  â”‚      â€¢ Returns: RebalancingPlan                      â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚      optimizationAgent.identifySuppressions(bounces),â”‚  â”‚
â”‚  â”‚      â†“                                               â”‚  â”‚
â”‚  â”‚      â€¢ Gemini API call 3 (concurrent)                â”‚  â”‚
â”‚  â”‚      â€¢ Temperature: 0.3 (very deterministic)         â”‚  â”‚
â”‚  â”‚      â€¢ Returns: SuppressionRecommendation            â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚      reportingAgent.generateReport(data)             â”‚  â”‚
â”‚  â”‚      â†“                                               â”‚  â”‚
â”‚  â”‚      â€¢ Gemini API call 4 (concurrent)                â”‚  â”‚
â”‚  â”‚      â€¢ Temperature: 0.6                              â”‚  â”‚
â”‚  â”‚      â€¢ Returns: WeeklyReport                         â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚    ])                                                â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  All 4 agents execute concurrently                   â”‚  â”‚
â”‚  â”‚  Total time â‰ˆ slowest agent (~5-10 seconds)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Aggregate Results         â”‚
            â”‚  {                         â”‚
            â”‚    health,                 â”‚
            â”‚    rebalance,              â”‚
            â”‚    optimization,           â”‚
            â”‚    report                  â”‚
            â”‚  }                         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent Communication Flow

```
 Orchestrator
      â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚              â”‚              â”‚              â”‚              â”‚
      â–¼              â–¼              â–¼              â–¼              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  Health  â”‚  â”‚Rebalance â”‚  â”‚ Optimize â”‚  â”‚  Report  â”‚          â”‚
â”‚  Agent   â”‚  â”‚  Agent   â”‚  â”‚  Agent   â”‚  â”‚  Agent   â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚
     â”‚             â”‚             â”‚             â”‚                 â”‚
     â”‚             â”‚             â”‚             â”‚                 â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
                   â”‚                                             â”‚
                   â–¼                                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
         â”‚   GeminiClient       â”‚                               â”‚
         â”‚   (Shared Instance)  â”‚                               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
                    â”‚                                            â”‚
                    â–¼                                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
         â”‚ Gemini 2.0 Flash API â”‚                               â”‚
         â”‚ 4 concurrent requestsâ”‚                               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
                    â”‚                                            â”‚
                    â”‚ Responses                                  â”‚
                    â–¼                                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
         â”‚  Agent Results       â”‚                               â”‚
         â”‚  â€¢ HealthAssessment  â”‚                               â”‚
         â”‚  â€¢ RebalancingPlan   â”‚                               â”‚
         â”‚  â€¢ Suppression Recs  â”‚                               â”‚
         â”‚  â€¢ WeeklyReport      â”‚                               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
                    â”‚                                            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Combined Results      â”‚
                    â”‚  Ready for execution   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Machine

### List Health States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LIST HEALTH STATES                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     HEALTHY
    (bounce < 2%)
         â”‚
         â”‚ Campaign sent
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Checking â”‚ â† Post-campaign (T+24h)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Bounce data analyzed
         â†“
    Decision Point
         â”‚
    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”
    â”‚    â”‚    â”‚
    â–¼    â–¼    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚HEALTHY â”‚ â”‚NEEDS       â”‚ â”‚NEEDS       â”‚
â”‚        â”‚ â”‚REBALANCING â”‚ â”‚CLEANUP     â”‚
â”‚<2%     â”‚ â”‚            â”‚ â”‚>10%        â”‚
â”‚bounce  â”‚ â”‚List        â”‚ â”‚bounce      â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚imbalanced  â”‚ â”‚            â”‚
    â”‚      â”‚Â±5-15%      â”‚ â”‚            â”‚
    â”‚      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚            â”‚               â”‚
    â”‚            â”‚ Rebalance     â”‚ Suppress
    â”‚            â–¼               â–¼
    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      â”‚REBALANCINGâ”‚   â”‚CLEANING  â”‚
    â”‚      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚            â”‚               â”‚
    â”‚            â”‚ Complete      â”‚ Complete
    â”‚            â–¼               â–¼
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚                        â”‚
                 â–¼                        â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
         â”‚  MAINTENANCE   â”‚              â”‚
         â”‚  COMPLETE      â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                  â”‚                      â”‚
                  â”‚ Update cache         â”‚
                  â–¼                      â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
         â”‚   MONITORED    â”‚              â”‚
         â”‚ (Weekly checks)â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                  â”‚                      â”‚
                  â”‚ Next campaign        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Campaign List Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CAMPAIGN LIST LIFECYCLE STATES                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    CREATED
   (New list)
       â”‚
       â”‚ Populate from master
       â–¼
   POPULATED
  (1,000 contacts)
       â”‚
       â”‚ Pre-campaign validation
       â–¼
    VALIDATED
  (Ready to send)
       â”‚
       â”‚ Campaign sent
       â–¼
   IN_USE
  (Campaign active)
       â”‚
       â”‚ Campaign complete
       â–¼
   ANALYZING
  (T+24h bounce check)
       â”‚
       â”‚ Bounces identified
       â–¼
  NEEDS_CLEANUP
  (Hard bounces found)
       â”‚
       â”‚ Suppression executed
       â–¼
   CLEANED
  (942 contacts remain)
       â”‚
       â”‚ Check balance
       â–¼
  NEEDS_REBALANCING
  (Below target -5.8%)
       â”‚
       â”‚ Rebalancing executed
       â–¼
   REBALANCED
  (1,040 contacts)
       â”‚
       â”‚ Cache updated
       â–¼
    READY
  (For next campaign)
       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       (Cycle repeats)
```

---

## Error Handling Flows

### Suppression Failure Recovery

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SUPPRESSION FAILURE HANDLING                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Execute Suppression
    suppressContacts(245)
            â”‚
            â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Try API â”‚
       â”‚ Call    â”‚
       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
            â”‚
      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
      â”‚           â”‚
      â–¼           â–¼
   SUCCESS     FAILURE
   (200)       (500/timeout)
      â”‚           â”‚
      â”‚           â–¼
      â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚     â”‚ Retry Attemptâ”‚
      â”‚     â”‚ (Exponential â”‚
      â”‚     â”‚  Backoff)    â”‚
      â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚            â”‚
      â”‚      Attempt 1,2,3
      â”‚            â”‚
      â”‚      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
      â”‚      â”‚           â”‚
      â”‚      â–¼           â–¼
      â”‚   SUCCESS     FAILURE
      â”‚   (partial)   (all failed)
      â”‚      â”‚           â”‚
      â”‚      â–¼           â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚ Accept  â”‚  â”‚ Queue   â”‚
      â”‚  â”‚ Partial â”‚  â”‚ for     â”‚
      â”‚  â”‚ Success â”‚  â”‚ Manual  â”‚
      â”‚  â”‚         â”‚  â”‚ Review  â”‚
      â”‚  â”‚ Log:    â”‚  â”‚         â”‚
      â”‚  â”‚ - Success: 200â”‚   â”‚ Alert   â”‚
      â”‚  â”‚ - Failed: 45  â”‚   â”‚ Team    â”‚
      â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚       â”‚            â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                     â”‚
              â–¼                     â”‚
      Continue workflow             â”‚
      (with partial results)        â”‚
                                    â”‚
      Log to database:              â”‚
      - Success count               â”‚
      - Failure count               â”‚
      - Error details               â”‚
      - Retry attempts              â”‚
                                    â”‚
      Slack notification:           â”‚
      "âš ï¸  Partial suppression      â”‚
       200/245 contacts suppressed" â”‚
                                    â”‚
      Manual review queue:          â”‚
      - 45 contacts pending          â”‚
      - Error: API timeout          â”‚
```

### Rebalancing Rollback

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              REBALANCING ROLLBACK FLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Execute Rebalancing
    moveContacts(plan)
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Capture       â”‚
    â”‚ Before State  â”‚
    â”‚ - list_1: 1000â”‚
    â”‚ - list_2: 942 â”‚
    â”‚ - list_3: 1177â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Apply   â”‚
       â”‚ Changes â”‚
       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
            â”‚
      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
      â”‚           â”‚
      â–¼           â–¼
   SUCCESS     FAILURE
   (complete)  (mid-operation)
      â”‚           â”‚
      â”‚           â–¼
      â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚     â”‚ Detect Failureâ”‚
      â”‚     â”‚ - API error   â”‚
      â”‚     â”‚ - Validation  â”‚
      â”‚     â”‚   failed      â”‚
      â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚            â”‚
      â”‚            â–¼
      â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚     â”‚ ROLLBACK     â”‚
      â”‚     â”‚              â”‚
      â”‚     â”‚ 1. Restore   â”‚
      â”‚     â”‚    Before    â”‚
      â”‚     â”‚    State     â”‚
      â”‚     â”‚              â”‚
      â”‚     â”‚ 2. Verify    â”‚
      â”‚     â”‚    Rollback  â”‚
      â”‚     â”‚    Success   â”‚
      â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚            â”‚
      â”‚      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
      â”‚      â”‚           â”‚
      â”‚      â–¼           â–¼
      â”‚  ROLLBACK    ROLLBACK
      â”‚  SUCCESS     FAILED
      â”‚      â”‚           â”‚
      â”‚      â–¼           â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚ Alert  â”‚  â”‚ CRITICALâ”‚
      â”‚  â”‚ Team   â”‚  â”‚ ALERT  â”‚
      â”‚  â”‚        â”‚  â”‚        â”‚
      â”‚  â”‚ Manual â”‚  â”‚ Manual â”‚
      â”‚  â”‚ Review â”‚  â”‚ Fix    â”‚
      â”‚  â”‚ Needed â”‚  â”‚ Requiredâ”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
   Capture After State
   - list_1: 1000
   - list_2: 1040
   - list_3: 1040
      â”‚
      â–¼
   Log to database
   - Before state
   - After state
   - Changes summary
   - AI rationale
```

---

## References

- [00_brainstorm.md](./00_brainstorm.md) - Feature concept and vision
- [Campaign Lifecycle Workflows](../lifecycle/01_workflow.md) - Existing workflow patterns
- Mermaid Diagrams - For interactive sequence diagrams
- Slack Block Kit - For notification formatting

---

**Last Updated**: October 1, 2025
**Version**: 1.0
**Status**: âœ… Complete
